<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
  </head>
  <body>

    <div id="app">
      {{message}}
      <el-upload
         class="upload"
         action=""
         accept=".csv"
         :on-preview="handlePreview"
         :on-remove="handleRemove"
         :file-list="fileList">
         <el-button size="small" type="primary"> upload csv </el-button>
      </el-upload>
    </div>


  <!-- ADD DEPENDENCIES -->     
  <?!= HtmlService.createHtmlOutputFromFile('packages').getContent(); ?>
  
  <script>

    var app = new Vue({
      el: '#app',
      data:{
        message:'hello world',
        fileList:[],
      },     
      methods: {
        handleRemove(file, fileList){
          console.log(file, fileList);
        },
        handlePreview(file){
          console.log(file);
          this.parseCsv(file.raw);
        },
        parseCsv(file){
          Papa.parse(file, {
            download: false,
            complete: function(results){
              console.log(results);
            },
          });
        },
      },
    });
    
  </script>
  </body>
</html>
